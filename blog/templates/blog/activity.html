
{% extends "blog/base.html" %}

{% block title %}{{ post.title }} {{ request.user.username }} Activity -Blog{% endblock %}

{% block content %}

{% load app_icons %}
{% load humanize %}

<div class="container m-0 p-0" style="max-height: 90vh; overflow-y: auto;">

  <div class="sticky-top bg-light text-danger p-3 " style="z-index: 1020;">
    <h3 class="mb-0 pt-2">{{ request.user.username }}'s Activity</h3>
  </div>

  <div class="px-1 pt-3 ">
    {% for act in activities %}
      <div class="card mb-3  border-0">
        <div class="card-body border-bottom">

          {% if act.activity_type == "post" %}
            <strong class="text-primary bg-light">{% get_icon 'post_new' %} You posted:
              <form method="post" action="{% url 'delete_activity' act.pk act.activity_type %}">
                {% csrf_token %}
                <a class="btn btn-link btn-sm text-danger p-1 ps-4">{% get_icon 'post_del' %}Remove</a>
              </form>
            </strong>
            <p>{{ act.title }}</p>
          {% elif act.activity_type == "requote" %}
            <strong class="text-primary bg-light">{% get_icon 'requote' %} You requoted:
              <form method="post" action="{% url 'delete_activity' act.pk act.activity_type %}">
                {% csrf_token %}
                <a class="btn btn-link btn-sm text-danger p-1 ps-4">{% get_icon 'post_del' %}Remove</a>
              </form>
            </strong>
            <blockquote class="fst-italic">{{ act.caption }}</blockquote>
            <p>Original: {{ act.post.title }}</p>
          {% elif act.activity_type == "comment" %}
            <strong class="text-primary bg-light">{% get_icon 'inbox' %} You commented:
              <form method="post" action="{% url 'delete_activity' act.pk act.activity_type %}">
                {% csrf_token %}
                <a class="btn btn-link btn-sm text-danger p-1 ps-4">{% get_icon 'post_del' %}Remove</a>
              </form>
            </strong>
            <p>"{{ act.text }}" on post <em>{{ act.post.title }}</em></p>
          {% elif act.activity_type == "like" %}
            <strong class="text-primary bg-light">{% get_icon 'thumb' %} You thumbed:
              <form method="post" action="{% url 'delete_activity' act.pk act.activity_type %}">
                {% csrf_token %}
                <a class="btn btn-link btn-sm text-danger p-1 ps-4">{% get_icon 'post_del' %}Remove</a>
              </form>
            </strong>
            <p>{{ act.post.title }}</p>
          {% endif %}

          <small class="text-muted">At {{ act.created_at }}</small>

        </div>
      </div>
    {% empty %}
      <p>No activity yet.</p>
    {% endfor %}
  </div>

</div>

{% endblock %}

